<mat-card class="card">
  <mat-card-title>Métricas de Avaliação</mat-card-title>
  <mat-card-subtitle>Análise de performance dos modelos de classificação.</mat-card-subtitle>
  <mat-card-content>
    <div *ngIf="loading" class="center-spinner">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>

    <mat-error *ngIf="!loading && error">{{ error }}</mat-error>

    <div *ngIf="!loading && metrics" class="metrics-content">
      <p class="best-model-info">
        Melhor Modelo Selecionado: <strong>{{ metrics.best_model }}</strong>
      </p>

      <table mat-table [dataSource]="asArray(metrics.metrics)" class="metrics-table mat-elevation-z8">
        </table>

      <div class="plots-grid">
        <div class="chart-container" *ngIf="confusionMatrixChartData">
          <h3>Matriz de Confusão ({{ metrics.best_model }})</h3>
          <canvas baseChart
            [data]="confusionMatrixChartData"
            [options]="confusionMatrixChartOptions"
            type="bar">
          </canvas>
        </div>
        </div>
    </div>
  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-stroked-button (click)="fetchData()">
      <mat-icon>refresh</mat-icon> Recarregar Dados
    </button>
  </mat-card-actions>
</mat-card>